<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="renderer" content="webkit">
  <title>Document</title>

<style>
* {
  margin: 0;
  padding: 0;
}
.grid{
  margin: 0 auto;
}
.grid-item{
  width: 200px;
  margin-bottom: 10px;
  overflow: hidden;
  cursor: pointer;
}
img{
  width:100%;
  height: 100%;
  display: block;
}
button{
  width:100px;
  height: 40px;
  border:0;
  color: #fff;
  background: rgb(59, 72, 197);
  cursor: pointer;
  margin:10px 0;
  margin-left: calc(50% - 400px);
}
</style>


</head>

<body>
  <button class="append-button">添加图片</button>
  <div class="grid">
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155016423822058.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155016423822058.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155016423822058.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155016423822058.png" alt=""></div>
       <div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt=""></div>
  </div>
  <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
  <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script>
  $(document).ready(function(){
    var $grid = $('.grid').masonry({
      itemSelector: '.grid-item',
      gutter: 16,
      fitWidth: true,
      transitionDuration: '0.8s'//过渡时间
    });
    // 每张图片加载完成后触发layout
    $grid.imagesLoaded().progress( function() {
      $grid.masonry('layout');
    });

    $('.append-button').on( 'click', function() {
      // 创建新item元素
      var $items = $('<div class="grid-item"><img src="http://xxiaoyuan.top/static/js/upload/wz/155140694445482.png" alt="" style="height:140px"></div>');
      // 将新元素添加到容器元素
      $grid.append( $items )
        // 对新元素和受影响的元素进行重新排列
        .masonry( 'appended', $items );
    });

    $grid.on( 'click', '.grid-item', function() {
        // 移除被点击的item
        $grid.masonry( 'remove', this )
          // 对剩余元素执行重排
          .masonry('layout');
    });
  })
  </script>
  <script>
    var arr=[100,120,130,120,90,60,60,80,110,50,60,120]
    var img=document.querySelectorAll('.grid-item');
    for(var i=0;i<img.length;i++){
        img[i].style.height= arr[i]+'px';
        img[i].setAttribute('title','点击删除')
    }
  
  
  </script>
</body>

</html>